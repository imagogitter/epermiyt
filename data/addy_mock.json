{
  "path": "/v1/messages",
  "headers": {
    "Host": "127.0.0.1:8025",
    "User-Agent": "epermits-scraper/1.0",
    "Accept-Encoding": "gzip, deflate, br",
    "Accept": "*/*",
    "Connection": "keep-alive",
    "Authorization": "Bearer DUMMYKEY",
    "Content-Type": "application/json",
    "Content-Length": "3848"
  },
  "payload": {
    "from": "reports@example.com",
    "to": "you@example.com",
    "subject": "ePermits report report-2025-11-13.html",
    "html": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n  <title>ePermits updates for 2025-11-13</title>\n  <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\" />\n  <style>\n    body { font-family: Arial, sans-serif; margin:0; padding:0 }\n    #map { width:100%; height:70vh }\n    .panel { padding:10px }\n    .thumb { width:160px; height:120px; object-fit:cover; border-radius:6px }\n    .marker-popup { width:260px }\n    .animated-list { display:flex; gap:8px; overflow-x:auto; padding:10px; scroll-behavior:smooth }\n  .card { transition: transform 220ms ease, box-shadow 220ms ease, opacity 300ms; border-radius:6px; padding:6px; opacity:0; transform: translateY(6px) }\n  .card.visible { opacity:1; transform: translateY(0) }\n  .card:hover { transform: translateY(-6px) scale(1.02); box-shadow: 0 10px 22px rgba(0,0,0,0.18) }\n    /* simple auto-scroll helper: toggle via JS */\n    .auto-scrolling { scroll-snap-type: x mandatory }\n  </style>\n</head>\n<body>\n  <div class=\"panel\">\n    <div style=\"display:flex;align-items:center;justify-content:space-between\">\n      <h2 style=\"margin:0\">ePermits updates for 2025-11-13</h2>\n      <div style=\"color:#666\">0 records</div>\n    </div>\n    <div id=\"map\"></div>\n    <h3>Updated records</h3>\n    <div class=\"animated-list\">\n      \n    </div>\n  </div>\n\n  <script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"></script>\n  <script>\n    const records = [];\n    const map = L.map('map').setView([39.7392, -104.9903], 11);\n    // Base tiles \u2014 OpenStreetMap (OSS-friendly)\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; OpenStreetMap contributors',\n      maxZoom: 19\n    }).addTo(map);\n\n    function mkPopup(r) {\n      let html = `<div class=\"marker-popup\">`;\n      if (r.thumbnail_path) {\n        html += `<img src=\"data/${r.thumbnail_path.split('/').pop()}\" style=\"width:220px;height:140px;object-fit:cover;border-radius:6px\"><br>`;\n      }\n      html += `<strong>${r.permit_number}</strong><br>`;\n      html += `${r.address || ''}<br>`;\n      if (r.details) {\n        html += `<small>${r.details.type || ''}</small>`;\n      }\n      html += `</div>`;\n      return html;\n    }\n\n    records.forEach(r => {\n      if (r.lat && r.lon) {\n        const m = L.marker([r.lat, r.lon]).addTo(map);\n        m.bindPopup(mkPopup(r));\n      }\n    });\n\n    // Auto-scroll the gallery slowly; pause on hover\n    const gallery = document.querySelector('.animated-list');\n    if (gallery) {\n      let scrollAmount = 0;\n      let direction = 1;\n      let last = performance.now();\n      let running = true;\n      gallery.classList.add('auto-scrolling');\n      gallery.addEventListener('mouseenter', () => running = false);\n      gallery.addEventListener('mouseleave', () => { running = true; last = performance.now(); });\n      function step(ts) {\n        if (running) {\n          const dt = (ts - last) / 1000;\n          last = ts;\n          // scroll at ~40px/sec\n          gallery.scrollLeft += direction * 40 * dt;\n          if (gallery.scrollLeft <= 0) direction = 1;\n          if (gallery.scrollLeft + gallery.clientWidth >= gallery.scrollWidth) direction = -1;\n        } else {\n          last = ts;\n        }\n        requestAnimationFrame(step);\n      }\n      requestAnimationFrame(step);\n      // reveal cards with a stagger\n      const cards = document.querySelectorAll('.card');\n      cards.forEach((c, i) => setTimeout(() => c.classList.add('visible'), 80 * i));\n    }\n  </script>\n</body>\n</html>"
  }
}